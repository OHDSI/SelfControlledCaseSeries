<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Load data for SCCS from the database — getDbSccsData • SelfControlledCaseSeries</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Load data for SCCS from the database — getDbSccsData" />
<meta property="og:description" content="Load all data needed to perform an SCCS analysis from the database." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SelfControlledCaseSeries</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/MultipleAnalyses.html">Running multiple analyses at once using the SelfControlledCaseSeries package</a>
    </li>
    <li>
      <a href="../articles/SingleStudies.html">Single studies using the SelfControlledCaseSeries package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/OHDSI/SelfControlledCaseSeries/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load data for SCCS from the database</h1>
    <small class="dont-index">Source: <a href='https://github.com/OHDSI/SelfControlledCaseSeries/blob/master/R/DataLoadingSaving.R'><code>R/DataLoadingSaving.R</code></a></small>
    <div class="hidden name"><code>getDbSccsData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Load all data needed to perform an SCCS analysis from the database.</p>
    </div>

    <pre class="usage"><span class='fu'>getDbSccsData</span>(
  <span class='no'>connectionDetails</span>,
  <span class='no'>cdmDatabaseSchema</span>,
  <span class='kw'>oracleTempSchema</span> <span class='kw'>=</span> <span class='no'>cdmDatabaseSchema</span>,
  <span class='kw'>outcomeDatabaseSchema</span> <span class='kw'>=</span> <span class='no'>cdmDatabaseSchema</span>,
  <span class='kw'>outcomeTable</span> <span class='kw'>=</span> <span class='st'>"condition_era"</span>,
  <span class='no'>outcomeIds</span>,
  <span class='kw'>exposureDatabaseSchema</span> <span class='kw'>=</span> <span class='no'>cdmDatabaseSchema</span>,
  <span class='kw'>exposureTable</span> <span class='kw'>=</span> <span class='st'>"drug_era"</span>,
  <span class='kw'>exposureIds</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(),
  <span class='kw'>useCustomCovariates</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>customCovariateDatabaseSchema</span> <span class='kw'>=</span> <span class='no'>cdmDatabaseSchema</span>,
  <span class='kw'>customCovariateTable</span> <span class='kw'>=</span> <span class='st'>"cohort"</span>,
  <span class='kw'>customCovariateIds</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(),
  <span class='kw'>useNestingCohort</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>nestingCohortDatabaseSchema</span> <span class='kw'>=</span> <span class='no'>cdmDatabaseSchema</span>,
  <span class='kw'>nestingCohortTable</span> <span class='kw'>=</span> <span class='st'>"cohort"</span>,
  <span class='kw'>nestingCohortId</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>deleteCovariatesSmallCount</span> <span class='kw'>=</span> <span class='fl'>100</span>,
  <span class='kw'>studyStartDate</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>studyEndDate</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>cdmVersion</span> <span class='kw'>=</span> <span class='st'>"5"</span>,
  <span class='kw'>maxCasesPerOutcome</span> <span class='kw'>=</span> <span class='fl'>0</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>connectionDetails</th>
      <td><p>An R object of type <code>ConnectionDetails</code> created using
the function <code>createConnectionDetails</code> in the
<code>DatabaseConnector</code> package.</p></td>
    </tr>
    <tr>
      <th>cdmDatabaseSchema</th>
      <td><p>The name of the database schema that contains the OMOP CDM
instance.  Requires read permissions to this database. On SQL
Server, this should specify both the database and the
schema, so for example 'cdm_instance.dbo'.</p></td>
    </tr>
    <tr>
      <th>oracleTempSchema</th>
      <td><p>A schema where temp tables can be created in Oracle.</p></td>
    </tr>
    <tr>
      <th>outcomeDatabaseSchema</th>
      <td><p>The name of the database schema that is the location where
the data used to define the outcome cohorts is available. If
outcomeTable = CONDITION_ERA, outcomeDatabaseSchema is not
used.  Requires read permissions to this database.</p></td>
    </tr>
    <tr>
      <th>outcomeTable</th>
      <td><p>The tablename that contains the outcome cohorts.  If
outcomeTable is not CONDITION_OCCURRENCE or CONDITION_ERA,
then expectation is outcomeTable has format of COHORT table:
COHORT_DEFINITION_ID, SUBJECT_ID, COHORT_START_DATE,
COHORT_END_DATE.</p></td>
    </tr>
    <tr>
      <th>outcomeIds</th>
      <td><p>A list of ids used to define outcomes.  If outcomeTable =
CONDITION_OCCURRENCE, the list is a set of ancestor
CONCEPT_IDs, and all occurrences of all descendant concepts
will be selected.  If outcomeTable &lt;&gt; CONDITION_OCCURRENCE,
the list contains records found in COHORT_DEFINITION_ID
field.</p></td>
    </tr>
    <tr>
      <th>exposureDatabaseSchema</th>
      <td><p>The name of the database schema that is the location where
the exposure data used to define the exposure cohorts is
available. If exposureTable = DRUG_ERA,
exposureDatabaseSchema is not used but assumed to be
cdmSchema.  Requires read permissions to this database.</p></td>
    </tr>
    <tr>
      <th>exposureTable</th>
      <td><p>The tablename that contains the exposure cohorts.  If
exposureTable &lt;&gt; DRUG_ERA, then expectation is exposureTable
has format of COHORT table: cohort_concept_id, SUBJECT_ID,
COHORT_START_DATE, COHORT_END_DATE.</p></td>
    </tr>
    <tr>
      <th>exposureIds</th>
      <td><p>A list of identifiers to define the exposures of interest. If
exposureTable = DRUG_ERA, exposureIds should be CONCEPT_ID.
If exposureTable &lt;&gt; DRUG_ERA, exposureIds is used to select
the cohort_concept_id in the cohort-like table. If no
exposureIds are provided, all drugs or cohorts in the
exposureTable are included as exposures.</p></td>
    </tr>
    <tr>
      <th>useCustomCovariates</th>
      <td><p>Create covariates from a custom table?</p></td>
    </tr>
    <tr>
      <th>customCovariateDatabaseSchema</th>
      <td><p>The name of the database schema that is the location where
the custom covariate data is available.</p></td>
    </tr>
    <tr>
      <th>customCovariateTable</th>
      <td><p>Name of the table holding the custom covariates. This table
should have the same structure as the cohort table.</p></td>
    </tr>
    <tr>
      <th>customCovariateIds</th>
      <td><p>A list of cohort definition IDS identifying the records in
the customCovariateTable to use for building custom
covariates.</p></td>
    </tr>
    <tr>
      <th>useNestingCohort</th>
      <td><p>Should the study be nested in a cohort (e.g. people with
a specific indication)? If not, the study will be nested
in the general population.</p></td>
    </tr>
    <tr>
      <th>nestingCohortDatabaseSchema</th>
      <td><p>The name of the database schema that is the location
where the nesting cohort is defined.</p></td>
    </tr>
    <tr>
      <th>nestingCohortTable</th>
      <td><p>Name of the table holding the nesting cohort. This table
should have the same structure as the cohort table.</p></td>
    </tr>
    <tr>
      <th>nestingCohortId</th>
      <td><p>A cohort definition ID identifying the records in the
nestingCohortTable to use as nesting cohort.</p></td>
    </tr>
    <tr>
      <th>deleteCovariatesSmallCount</th>
      <td><p>The minimum count for a covariate to appear in the data to be
kept.</p></td>
    </tr>
    <tr>
      <th>studyStartDate</th>
      <td><p>A calendar date specifying the minimum date where data is
used. Date format is 'yyyymmdd'.</p></td>
    </tr>
    <tr>
      <th>studyEndDate</th>
      <td><p>A calendar date specifying the maximum date where data is
used. Date format is 'yyyymmdd'.</p></td>
    </tr>
    <tr>
      <th>cdmVersion</th>
      <td><p>Define the OMOP CDM version used: currently support "4" and
"5".</p></td>
    </tr>
    <tr>
      <th>maxCasesPerOutcome</th>
      <td><p>If there are more than this number of cases for a single
outcome cases will be sampled to this size. <code>maxCasesPerOutcome = 0</code>
indicates no maximum size.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns an object of type <code>sccsData</code>, containing information on the cases, their outcomes,
exposures, and potentially other covariates. Information about multiple outcomes can be captured at
once for efficiency reasons. This object is a list with the following components:</p><dl'>
<dt>cases</dt><dd><p>An ffdf object listing the persons that have the outcome(s), their age, and
observation time.</p></dd> <dt>eras</dt><dd><p>An ffdf object listing the exposures, outcomes and other
covariates.</p></dd> <dt>covariateRef</dt><dd><p>An ffdf object describing the covariates that have been
extracted.</p></dd> <dt>metaData</dt><dd><p>A list of objects with information on how the sccsData object was
constructed.</p></dd> 
</dl><p>The generic <code><a href='https://rdrr.io/r/base/summary.html'>summary()</a></code> function has been implemented for this object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function downloads several types of information:</p><ul>
<li><p>Information on the occurrences of the outcome(s) of interest. Note that information for
        multiple outcomes can be fetched in one go, and later the specific outcome can be specified
        for which we want to build a model.</p></li>
<li><p>Information on the observation time and age for the people with the outcomes.</p></li>
<li><p>Information on exposures of interest which we want to include in the model.</p></li>
</ul><p>Five different database schemas can be specified, for five different types of information: The
<code>cdmDatabaseSchema</code> is used to extract patient age and observation period. The
<code>outcomeDatabaseSchema</code> is used to extract information about the outcomes, the
<code>exposureDatabaseSchema</code> is used to retrieve information on exposures, and the
<code>customCovariateDatabaseSchema</code> is optionally used to find additional, user-defined
covariates. All four locations could point to the same database schema.
<code>nestingCohortDatabaseSchema</code> is optionally used to define a cohort in which the analysis is nested,
for example a cohort of diabetics patients.</p>
<p>All five locations could point to the same database schema.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Martijn Schuemie, Patrick Ryan, Trevor Shaddox, Marc Suchard.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


